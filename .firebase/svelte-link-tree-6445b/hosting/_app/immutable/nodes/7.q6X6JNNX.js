import{s as ae,v as V,p as J,g as b,c as x,l as ne,h as w,z as N,d as P,i as S,m as oe,k as R,D as K}from"../chunks/scheduler.QFVCaXZV.js";import{S as le,i as re,d as A,v as ie,j as ce,k as ue,m as fe,b as me,t as pe,l as de,e as p,g as r,a as C,n as k,p as he}from"../chunks/index.5xRIlaLs.js";import{A as te}from"../chunks/AuthCheck.A4oqIV7H.js";import{u as F,a as I,d as Q,e as W,f as X,g as Y,h as Z,r as $,i as ee}from"../chunks/firebase.3aidnv6S.js";const U="C:/Users/razor/OneDrive/Desktop/s project/my-app/src/routes/login/photo/+page.svelte";function q(n){let e,l="Uploading...",u,s;const t={c:function(){e=b("p"),e.textContent=l,u=x(),s=b("progress"),this.h()},l:function(c){e=w(c,"P",{"data-svelte-h":!0}),N(e)!=="svelte-be0b5h"&&(e.textContent=l),u=P(c),s=w(c,"PROGRESS",{class:!0}),S(s).forEach(p),this.h()},h:function(){R(e,U,46,4,1397),r(s,"class","progress progress-info w-56 mt-6"),R(s,U,47,4,1422)},m:function(c,d){C(c,e,d),C(c,u,d),C(c,s,d)},d:function(c){c&&(p(e),p(u),p(s))}};return A("SvelteRegisterBlock",{block:t,id:q.name,type:"if",source:"(43:2) {#if uploading}",ctx:n}),t}function se(n){let e,l="Upload a Profile Photo",u,s,t,a,c,d,m,_,E="Pick a file",o,h,D,L,g,O,B,G,f=n[2]&&q(n);const M={c:function(){e=b("h2"),e.textContent=l,u=x(),s=b("form"),t=b("div"),a=b("img"),d=x(),m=b("label"),_=b("span"),_.textContent=E,o=x(),h=b("input"),D=x(),f&&f.c(),L=x(),g=b("a"),O=ne("Finish"),this.h()},l:function(i){e=w(i,"H2",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1whglfv"&&(e.textContent=l),u=P(i),s=w(i,"FORM",{class:!0});var v=S(s);t=w(v,"DIV",{class:!0});var y=S(t);a=w(y,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),d=P(y),m=w(y,"LABEL",{for:!0,class:!0});var H=S(m);_=w(H,"SPAN",{class:!0,"data-svelte-h":!0}),N(_)!=="svelte-1xba4c3"&&(_.textContent=E),H.forEach(p),o=P(y),h=w(y,"INPUT",{name:!0,type:!0,class:!0,accept:!0}),D=P(y),f&&f.l(y),y.forEach(p),v.forEach(p),L=P(i),g=w(i,"A",{href:!0,class:!0});var T=S(g);O=oe(T,"Finish"),T.forEach(p),this.h()},h:function(){r(e,"class","card-title"),R(e,U,24,1,757),K(a.src,c=n[1]??n[0]?.photoURL??"/user.png")||r(a,"src",c),r(a,"alt","photoURL"),r(a,"width","256"),r(a,"height","256"),r(a,"class","mx-auto"),R(a,U,28,2,928),r(_,"class","label-text"),R(_,U,36,4,1120),r(m,"for","photoURL"),r(m,"class","label"),R(m,U,35,2,1078),r(h,"name","photoURL"),r(h,"type","file"),r(h,"class","file-input file-input-bordered w-full max-w-xs"),r(h,"accept","image/png, image/jpeg, image/gif, image/webp"),R(h,U,38,2,1179),r(t,"class","form-control w-full max-w-xs my-10 mx-auto text-center"),R(t,U,27,3,856),r(s,"class","max-w-screen-md w-full"),R(s,U,26,1,814),r(g,"href",n[3]),r(g,"class","btn btn-primary"),R(g,U,52,1,1512)},m:function(i,v){C(i,e,v),C(i,u,v),C(i,s,v),k(s,t),k(t,a),k(t,d),k(t,m),k(m,_),k(t,o),k(t,h),k(t,D),f&&f.m(t,null),C(i,L,v),C(i,g,v),k(g,O),B||(G=he(h,"change",n[4],!1,!1,!1,!1),B=!0)},p:function(i,v){v&3&&!K(a.src,c=i[1]??i[0]?.photoURL??"/user.png")&&r(a,"src",c),i[2]?f||(f=q(i),f.c(),f.m(t,null)):f&&(f.d(1),f=null),v&8&&r(g,"href",i[3])},d:function(i){i&&(p(e),p(u),p(s),p(L),p(g)),f&&f.d(),B=!1,G()}};return A("SvelteRegisterBlock",{block:M,id:se.name,type:"slot",source:"(21:2) <AuthCheck>",ctx:n}),M}function z(n){let e,l;e=new te({props:{$$slots:{default:[se]},$$scope:{ctx:n}},$$inline:!0});const u={c:function(){ce(e.$$.fragment)},l:function(t){ue(e.$$.fragment,t)},m:function(t,a){fe(e,t,a),l=!0},p:function(t,[a]){const c={};a&79&&(c.$$scope={dirty:a,ctx:t}),e.$set(c)},i:function(t){l||(me(e.$$.fragment,t),l=!0)},o:function(t){pe(e.$$.fragment,t),l=!1},d:function(t){de(e,t)}};return A("SvelteRegisterBlock",{block:u,id:z.name,type:"component",source:"",ctx:n}),u}function ge(n,e,l){let u,s,t;V(F,"user"),J(n,F,o=>l(5,s=o)),V(I,"userData"),J(n,I,o=>l(0,t=o));let{$$slots:a={},$$scope:c}=e;ie("Page",a,[]);let d,m=!1;async function _(o){l(2,m=!0);const h=o.target.files[0];l(1,d=URL.createObjectURL(h));const D=$(Q,`users/${s.uid}/profile.png`),L=await ee(D,h),g=await Z(L.ref);await Y(X(W,"users",s.uid),{photoURL:g}),l(2,m=!1)}const E=[];return Object.keys(e).forEach(o=>{!~E.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<Page> was created with unknown prop '${o}'`)}),n.$capture_state=()=>({AuthCheck:te,user:F,userData:I,storage:Q,db:W,doc:X,updateDoc:Y,getDownloadURL:Z,ref:$,uploadBytes:ee,previewURL:d,uploading:m,upload:_,href:u,$user:s,$userData:t}),n.$inject_state=o=>{"previewURL"in o&&l(1,d=o.previewURL),"uploading"in o&&l(2,m=o.uploading),"href"in o&&l(3,u=o.href)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&l(3,u=`/${t?.username}/edit`)},[t,d,m,u,_]}class Re extends le{constructor(e){super(e),re(this,e,ge,z,ae,{}),A("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:z.name})}}export{Re as component};
